const log2Safe = (x) => {
    return x > 0 ? Math.log2(x) : 0;
}